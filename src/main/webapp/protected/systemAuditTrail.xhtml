<html xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:pe="http://primefaces.org/ui/extensions" >
	<f:metadata>
    	<f:event type="preRenderView" listener="#{authenticationBean.hasPageAccess('AdminFunctions')}" />
    </f:metadata>
	
<h:head>
	
</h:head>
	
<h:body>
<ui:composition template="/templates/mainlayout.xhtml">

<ui:define name="title">System Audit Trail Records</ui:define>

<ui:define name="content">
		<h:form id="systemAuditTrailForm">
		<p:panel header="Search" toggleable="true">
			<p:panelGrid id="SearchEmployee" columns="2" cellpadding="4">
				
				<h:outputText value="From :" />
					<p:calendar value="#{systemAuditTrailMgmtBean.date1}" pattern="dd/MM/yyyy HH:mm" id="start1" shownOn="button"/>
					
				
				<h:outputText value="To :" />
				<p:calendar value="#{systemAuditTrailMgmtBean.date2}" pattern="dd/MM/yyyy HH:mm" id="start2"  shownOn="button" />
					
		<h:outputText value="Activity :" />
				<h:inputText value="#{systemAuditTrailMgmtBean.activity}"	 />
					
				<f:facet name="footer">				
						  <p:commandButton action="#{systemAuditTrailMgmtBean.search}" value="Search" update=":systemAuditTrailForm:systemAuditTrailTable" ajax="false"/>
				          <p:commandButton value="Reset"  type="reset" update=":systemAuditTrailForm:systemAuditTrailTable" />
				</f:facet>
			</p:panelGrid>
			</p:panel>
		
		  
        <p:dataTable id="systemAuditTrailTable" widgetVar="systemAuditTraiVar" var="systemAudit0" scrollable="true" rows="10" paginator="true" value="#{systemAuditTrailMgmtBean.systemAuditTrailDataModel}" rowKey="#{systemAudit0.id}">
            
            <p:column id="activityHeader" sortById="activity">
            <f:facet name="header"> Activity </f:facet>
            <h:outputText value="#{systemAudit0.activity}" />
          </p:column>
        
             <p:column id="userNameHeader" sortById="actorUsername">
            <f:facet name="header"> User Name </f:facet>
            <h:outputText value="#{systemAudit0.actorUsername}" />
          </p:column>
          
          <p:column id="date"  sortBy="date">
            <f:facet name="header"> Date </f:facet>
            <h:outputText value="#{systemAudit0.date}" >
           <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" />  
            </h:outputText>
          </p:column>
          <p:column id="descHeader" sortBy="desription">
            <f:facet name="header"> Description </f:facet>
            <h:outputText value="#{systemAudit0.description}" />
          </p:column>
        
 
        </p:dataTable>
        
      </h:form>      
    
  </ui:define>  
  
</ui:composition>	
</h:body> 
</html>

